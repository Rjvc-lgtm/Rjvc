<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8" />
<title>RJVC Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
  body {
    margin:0;
    padding:20px;
    background:#f1f3ff;
    font-family:system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  }
  .box {
    max-width:900px;
    margin:auto;
    background:white;
    padding:20px;
    border-radius:16px;
    box-shadow:0 10px 25px rgba(0,0,0,0.15);
  }
  h1 {
    text-align:center;
    color:#001f5c;
    margin-top:0;
  }
  h2 {
    color:#031b4f;
    border-left:4px solid #4a6eff;
    padding-left:8px;
    margin-top:24px;
    margin-bottom:10px;
    font-size:18px;
  }
  label {
    font-weight:600;
    font-size:13px;
  }
  input {
    width:100%;
    padding:8px;
    border-radius:8px;
    border:1px solid #bbb;
    margin-top:4px;
    font-size:13px;
  }
  button {
    background:#002fad;
    color:white;
    padding:8px 16px;
    border:none;
    border-radius:10px;
    margin-top:10px;
    cursor:pointer;
    font-size:13px;
  }
  button:hover {
    opacity:0.9;
  }
  table {
    width:100%;
    border-collapse:collapse;
    margin-top:10px;
  }
  th, td {
    padding:8px;
    border-bottom:1px solid #ddd;
    font-size:13px;
    text-align:left;
  }
  th {
    background:#eaf0ff;
  }
  .approve-btn {
    background:#059669;
    color:white;
    padding:4px 10px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-size:12px;
  }
  .reject-btn {
    background:#ef4444;
    color:white;
    padding:4px 10px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-size:12px;
  }
  .small-btn {
    padding:4px 8px;
    border-radius:8px;
    font-size:11px;
    border:none;
    cursor:pointer;
    margin:2px 3px 0 0;
  }
  .edit-btn {
    background:#e0f2fe;
    color:#0369a1;
    border:1px solid #bae6fd;
  }
  .block-btn {
    background:#fef3c7;
    color:#92400e;
    border:1px solid #fde68a;
  }
  .bonus-btn {
    background:#ecfdf5;
    color:#047857;
    border:1px solid #bbf7d0;
  }
  .main-add-btn {
    background:#e0f2fe;
    color:#1d4ed8;
    border:1px solid #bfdbfe;
  }
  .sub-add-btn {
    background:#f1f5f9;
    color:#0f766e;
    border:1px solid #bae6fd;
  }
  .status-badge {
    display:inline-block;
    padding:2px 8px;
    border-radius:999px;
    font-size:11px;
  }
  .active-badge {
    background:#dcfce7;
    color:#166534;
  }
  .blocked-badge {
    background:#fee2e2;
    color:#b91c1c;
  }
  #createMsg {
    font-size:12px;
  }
  .sub-row {
    background:#fafafa;
  }
  .sub-note {
    font-size:11px;
    color:#555;
  }

  /* TREE VIEW – आपके sketch जैसा base + नीचे joint list */
  .tree-row td {
    padding-top:6px;
    padding-bottom:16px;
  }
  .tree-card {
    margin-top:4px;
    padding:10px 8px 10px;
    border-radius:12px;
    background:#f5f5ff;
    border:1px solid #e0e7ff;
  }
  .tree-title {
    font-size:11px;
    font-weight:600;
    color:#1e3a8a;
    margin-bottom:6px;
  }
  .tree {
    width:100%;
    max-width:340px;
    margin:0 auto 8px;
  }
  .tree-level-1,
  .tree-level-2,
  .tree-level-3 {
    display:flex;
    justify-content:center;
    align-items:center;
    position:relative;
  }
  .tree-node {
    padding:4px 10px;
    border-radius:14px;
    background:#111827;
    color:#f9fafb;
    font-size:11px;
    text-align:center;
    min-width:80px;
  }
  .tree-node.small {
    min-width:70px;
    font-size:10px;
  }

  /* Main ID */
  .tree-level-1 {
    margin-bottom:16px;
  }
  .tree-level-1::after {
    content:"";
    position:absolute;
    bottom:-12px;
    left:50%;
    transform:translateX(-50%);
    width:2px;
    height:12px;
    background:#9ca3af;
  }

  /* Sub1 + Sub2 row */
  .tree-level-2 {
    justify-content:space-between;
    margin:0 24px;
    margin-bottom:18px;
  }
  .tree-branch {
    position:relative;
    flex:1;
    display:flex;
    justify-content:center;
  }

  /* Horizontal line between Sub1 और Sub2 (Main से निकला हुआ) */
  .tree-level-2::before {
    content:"";
    position:absolute;
    top:-12px;
    left:15%;
    right:15%;
    height:2px;
    background:#9ca3af;
  }
  /* Vertical lines Main से down */
  .tree-branch::before {
    content:"";
    position:absolute;
    top:-12px;
    width:2px;
    height:12px;
    background:#9ca3af;
  }

  /* Sub1 के नीचे Sub3 के लिए vertical line */
  .tree-sub1-wrap {
    position:relative;
    display:flex;
    flex-direction:column;
    align-items:center;
  }
  .tree-sub1-wrap::after {
    content:"";
    position:absolute;
    top:18px;
    width:2px;
    height:20px;
    background:#9ca3af;
  }

  .tree-level-3 {
    margin-top:4px;
  }

  .tree-links {
    font-size:11px;
    color:#111827;
    margin-top:4px;
  }
  .tree-links-title {
    font-weight:600;
    margin-top:3px;
  }
  .tree-links ul {
    margin:2px 0 4px 14px;
    padding:0;
  }
  .tree-links li {
    margin:0;
    padding:0;
    list-style-type:"• ";
  }
  .tree-links-empty {
    font-size:10px;
    color:#6b7280;
  }
</style>
</head>

<body>
<div class="box">

  <h1>RJVC ADMIN PANEL</h1>

  <!-- CREATE CUSTOMER SECTION -->
  <h2>नया Customer Create करें</h2>

  <label>Customer Name</label>
  <input id="custName" type="text" placeholder="जैसे: रमेश" />

  <label style="margin-top:10px;">Mobile Number</label>
  <input id="custMobile" type="tel" placeholder="10 digit number" />

  <button onclick="createCustomer()">Create Customer</button>

  <div id="createMsg" style="margin-top:10px; color:green; font-weight:600;"></div>


  <!-- CUSTOMER LIST -->
  <h2>Customer List (1 Main + 3 Sub IDs)</h2>
  <table id="customerTable">
    <thead>
      <tr>
        <th>ID Type</th>
        <th>RJVC ID</th>
        <th>Name</th>
        <th>Mobile</th>
        <th>Joined Members<br/>(Total Tree)</th>
        <th>Commission Wallet</th>
        <th>Bonus Wallet</th>
        <th>Status / Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>


  <!-- WITHDRAW REQUEST LIST -->
  <h2>Withdrawal Requests (Approve / Reject)</h2>

  <table id="withdrawTable">
    <thead>
      <tr>
        <th>Name</th>
        <th>Mobile</th>
        <th>Amount</th>
        <th>Wallet</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

</div>

<script>
/* ---------- BASIC STORAGE HELPERS ---------- */
function getCustomers() {
  return JSON.parse(localStorage.getItem("rjvc_customers") || "[]");
}
function saveCustomers(arr) {
  localStorage.setItem("rjvc_customers", JSON.stringify(arr));
}

function getWithdrawals() {
  return JSON.parse(localStorage.getItem("rjvc_withdrawals") || "[]");
}
function saveWithdrawals(arr) {
  localStorage.setItem("rjvc_withdrawals", JSON.stringify(arr));
}

/* rjvc_settings से commission per member */
function getSettings() {
  try {
    return JSON.parse(localStorage.getItem("rjvc_settings") || "{}");
  } catch(e) {
    return {};
  }
}

/* Helper: base RJVC ID (mobile के last 4 digit से) */
function getBaseId(c) {
  const mob = (c.mobile || "").replace(/\D/g, "");
  const last4 = mob.slice(-4) || String(c.id).slice(-4);
  return "RJVC" + last4;
}

/* -------------------- CREATE CUSTOMER -------------------- */
function createCustomer() {
  let name = document.getElementById("custName").value.trim();
  let mobile = document.getElementById("custMobile").value.trim();

  if (!name || !mobile) {
    alert("Name और Mobile दोनों जरूरी हैं।");
    return;
  }
  if (mobile.length < 10) {
    alert("Valid mobile number डालें।");
    return;
  }

  let customers = getCustomers();
  if (customers.some(c => c.mobile === mobile)) {
    alert("यह mobile पहले से registered है।");
    return;
  }

  // किसके नीचे join करना है? (parent)
  let parentMobile = prompt(
    "किस customer के नीचे join करना है? (उसका mobile number लिखें)\nअगर यह सबसे ऊपर वाला (root) customer है तो खाली छोड़ दें।",
    ""
  );
  parentMobile = (parentMobile || "").trim();
  let parentNode = null;

  if (parentMobile) {
    let parentExists = customers.some(c => c.mobile === parentMobile);
    if (!parentExists) {
      alert("यह mobile किसी existing customer के लिए नहीं मिला।\nइसको अभी top (root) पर रखा जाएगा।");
      parentMobile = null;
      parentNode = null;
    } else {
      let node = prompt(
        "किस ID के नीचे join करना है? (main / sub1 / sub2 / sub3)\nउदाहरण: main",
        "main"
      );
      node = (node || "").toLowerCase().trim();
      if (!["main","sub1","sub2","sub3"].includes(node)) {
        alert("गलत ID type दिया गया। इसको main के नीचे मान लिया जाएगा।");
        node = "main";
      }
      parentNode = node;
    }
  }

  customers.push({
    id: Date.now(),
    name,
    mobile,
    joinedMembers: 2,       // Sub ID 1 और Sub ID 2 already जुड़े माने जाएँगे
    state: "new",
    currentLevel: 0,
    nextLevel: 1,
    remainingForNext: 0,
    nextLevelIncome: 0,
    totalIncome: 0,
    walletBalance: 0,       // Commission Wallet
    bonusBalance: 0,        // Bonus Wallet (Sub IDs से)
    isBlocked: false,
    parentMobile: parentMobile || null,
    parentNode: parentNode || null,  // main / sub1 / sub2 / sub3
    createdAt: new Date().toISOString()
  });

  saveCustomers(customers);

  document.getElementById("createMsg").innerText =
    "Customer सफलतापूर्वक बनाया गया ✔️";
  document.getElementById("custName").value = "";
  document.getElementById("custMobile").value = "";

  renderCustomers();
}

/* -------------------- EDIT CUSTOMER (Main ID डेटा) -------------------- */
function editCustomer(mobile) {
  let customers = getCustomers();
  let idx = customers.findIndex(c => c.mobile === mobile);
  if (idx === -1) return;

  let c = customers[idx];

  let newName   = prompt("Customer Name:", c.name || "");
  if (newName === null) return;
  newName = newName.trim();
  if (!newName) {
    alert("Name खाली नहीं हो सकता।");
    return;
  }

  let newMobile = prompt("Mobile Number:", c.mobile || "");
  if (newMobile === null) return;
  newMobile = newMobile.trim();
  if (!newMobile) {
    alert("Mobile खाली नहीं हो सकता।");
    return;
  }
  if (newMobile.length < 10) {
    alert("Valid mobile number डालें।");
    return;
  }

  if (newMobile !== mobile && customers.some(x => x.mobile === newMobile)) {
    alert("यह mobile किसी और customer के लिए पहले से मौजूद है।");
    return;
  }

  let newJoined = prompt("Joined Members (Total Active - पूरी tree):", c.joinedMembers || 0);
  if (newJoined === null) return;
  let jm = parseInt(newJoined || "0", 10);
  if (isNaN(jm) || jm < 0) jm = 0;

  let newComm = prompt("Commission Wallet (₹):", c.walletBalance || 0);
  if (newComm === null) return;
  let cw = parseFloat(newComm || "0");
  if (isNaN(cw) || cw < 0) cw = 0;

  let newBonus = prompt("Bonus Wallet (₹):", c.bonusBalance || 0);
  if (newBonus === null) return;
  let bw = parseFloat(newBonus || "0");
  if (isNaN(bw) || bw < 0) bw = 0;

  // Parent info भी बदल सकते हैं (optional)
  let pMob = prompt(
    "किस customer के नीचे joined है? (mobile)\nखाली छोड़ने पर top/root माना जाएगा।",
    c.parentMobile || ""
  );
  pMob = (pMob || "").trim();

  let pNode = c.parentNode || null;
  if (pMob) {
    if (!customers.some(x => x.mobile === pMob && x.mobile !== mobile)) {
      alert("दिया गया parent mobile valid नहीं है (या खुद का number है)।\nइसको root माना जाएगा।");
      pMob = null;
      pNode = null;
    } else {
      let node = prompt(
        "किस ID के नीचे join है? (main / sub1 / sub2 / sub3)",
        c.parentNode || "main"
      );
      node = (node || "").toLowerCase().trim();
      if (!["main","sub1","sub2","sub3"].includes(node)) {
        alert("गलत ID type, main मान लिया जाएगा।");
        node = "main";
      }
      pNode = node;
    }
  } else {
    pNode = null;
  }

  c.name = newName;
  c.mobile = newMobile;
  c.joinedMembers = jm;
  c.walletBalance = cw;
  c.bonusBalance = bw;
  c.parentMobile = pMob || null;
  c.parentNode = pNode || null;

  customers[idx] = c;
  saveCustomers(customers);
  renderCustomers();
  alert("Customer detail update हो गया ✔️");
}

/* -------------------- AUTO ADD MEMBERS (Main/Sub) -------------------- */
function addMembersTo(mobile, idType) {
  let customers = getCustomers();
  let idx = customers.findIndex(c => c.mobile === mobile);
  if (idx === -1) {
    alert("Customer नहीं मिला।");
    return;
  }
  let c = customers[idx];

  let countStr = prompt("कितने नए members add करने हैं इस ID के नीचे?", "1");
  if (countStr === null) return;
  let count = parseInt(countStr || "0", 10);
  if (isNaN(count) || count <= 0) {
    alert("Valid members count दर्ज करें (1 या उससे ज्यादा)।");
    return;
  }

  let settings = getSettings();
  let perMember = parseFloat(settings.perMember || "0");
  if (!perMember || isNaN(perMember) || perMember <= 0) {
    let pmStr = prompt("Per member commission (₹) क्या रखें?", "16");
    if (pmStr === null) return;
    perMember = parseFloat(pmStr || "0");
    if (!perMember || isNaN(perMember) || perMember <= 0) {
      alert("Valid commission amount दर्ज करें।");
      return;
    }
    settings.perMember = perMember;
    localStorage.setItem("rjvc_settings", JSON.stringify(settings));
  }

  const gross = count * perMember;
  let msg = "";

  if (idType === "main") {
    // Main ID → Commission Wallet
    c.walletBalance = (c.walletBalance || 0) + gross;
    msg =
      "Main ID के नीचे " + count + " नए members जोड़े गए।\n" +
      "कुल commission: ₹" + gross + "\n" +
      "Commission Wallet में ₹" + gross + " add हो गया।";
  } else {
    // Sub IDs → 15% company, 85% Bonus Wallet
    const rate = 15;
    const companyPart = Math.round(gross * rate) / 100;
    const bonusNet = gross - companyPart;
    c.bonusBalance = (c.bonusBalance || 0) + bonusNet;

    let whichSub = "Sub ID";
    if (idType === "sub1") whichSub = "Sub ID 1";
    if (idType === "sub2") whichSub = "Sub ID 2";
    if (idType === "sub3") whichSub = "Sub ID 3";

    msg =
      whichSub + " के नीचे " + count + " नए members जोड़े गए।\n" +
      "कुल Sub ID Commission: ₹" + gross + "\n" +
      "Company Share (15%): ₹" + companyPart + "\n" +
      "Main ID के Bonus Wallet में credit: ₹" + bonusNet;
  }

  // पूरी tree के total members
  c.joinedMembers = (c.joinedMembers || 0) + count;

  customers[idx] = c;
  saveCustomers(customers);
  renderCustomers();
  alert(msg + "\n\nअब इस ID की पूरी tree का level और earning index page पर auto दिखेगी।");
}

/* -------------------- MANUAL BONUS -------------------- */
function addBonusManual(mobile) {
  let customers = getCustomers();
  let idx = customers.findIndex(c => c.mobile === mobile);
  if (idx === -1) return;

  let c = customers[idx];

  let amtStr = prompt(
    "Manual Bonus (₹) दर्ज करें जो सीधे Bonus Wallet में जोड़ना है:",
    "0"
  );
  if (amtStr === null) return;

  let amt = parseFloat(amtStr || "0");
  if (isNaN(amt) || amt <= 0) {
    alert("Valid amount दर्ज करें।");
    return;
  }

  c.bonusBalance = (c.bonusBalance || 0) + amt;
  customers[idx] = c;
  saveCustomers(customers);
  renderCustomers();

  alert(
    "Manual Bonus: ₹" + amt +
    " \"" + (c.name || "") + "\" के Bonus Wallet में जोड़ दिया गया ✔️"
  );
}

/* -------------------- BLOCK / UNBLOCK -------------------- */
function toggleBlock(mobile) {
  let customers = getCustomers();
  let idx = customers.findIndex(c => c.mobile === mobile);
  if (idx === -1) return;

  let c = customers[idx];
  let newState = !c.isBlocked;

  if (newState) {
    if (!confirm("क्या आप इस customer की सभी IDs (Main + 3 Sub) को BLOCK करना चाहते हैं?")) {
      return;
    }
  } else {
    if (!confirm("क्या आप इस customer की सभी IDs को UNBLOCK करना चाहते हैं?")) {
      return;
    }
  }

  c.isBlocked = newState;
  customers[idx] = c;
  saveCustomers(customers);
  renderCustomers();
}

/* -------------------- CHILDREN INDEX (कौन किसके नीचे) -------------------- */
function buildChildrenIndex(customers) {
  const map = {};
  customers.forEach(child => {
    if (!child.parentMobile || !child.parentNode) return;
    const key = child.parentMobile + "|" + child.parentNode;
    if (!map[key]) map[key] = [];
    map[key].push(child);
  });
  return map;
}

/* -------------------- SHOW CUSTOMER LIST + TREE -------------------- */
function renderCustomers() {
  let customers = getCustomers();
  let childrenIndex = buildChildrenIndex(customers);
  let tbody = document.querySelector("#customerTable tbody");
  tbody.innerHTML = "";

  customers.forEach(c => {
    const baseId = getBaseId(c);
    const statusText  = c.isBlocked ? "Blocked" : "Active";
    const statusClass = c.isBlocked ? "status-badge blocked-badge" : "status-badge active-badge";
    const blockBtnText = c.isBlocked ? "Unblock" : "Block";

    // 1️⃣ Main ID row
    let trMain = document.createElement("tr");
    trMain.innerHTML = `
      <td>Main ID</td>
      <td>${baseId}</td>
      <td>${c.name || ""}</td>
      <td>${c.mobile || ""}</td>
      <td>${c.joinedMembers || 0}</td>
      <td>₹${c.walletBalance || 0}</td>
      <td>₹${c.bonusBalance || 0}</td>
      <td>
        <span class="${statusClass}">${statusText}</span><br/>
        <button class="small-btn main-add-btn" onclick="addMembersTo('${c.mobile}','main')">+ Member (Main)</button>
        <button class="small-btn sub-add-btn" onclick="addMembersTo('${c.mobile}','sub1')">+ Member (Sub 1)</button>
        <button class="small-btn sub-add-btn" onclick="addMembersTo('${c.mobile}','sub2')">+ Member (Sub 2)</button>
        <button class="small-btn sub-add-btn" onclick="addMembersTo('${c.mobile}','sub3')">+ Member (Sub 3)</button>
        <button class="small-btn bonus-btn" onclick="addBonusManual('${c.mobile}')">Manual Bonus</button>
        <button class="small-btn edit-btn" onclick="editCustomer('${c.mobile}')">Edit</button>
        <button class="small-btn block-btn" onclick="toggleBlock('${c.mobile}')">${blockBtnText}</button>
      </td>
    `;
    tbody.appendChild(trMain);

    // 2️⃣ Sub ID rows (1,2,3) – info only
    for (let i = 1; i <= 3; i++) {
      let trSub = document.createElement("tr");
      trSub.className = "sub-row";
      trSub.innerHTML = `
        <td>Sub ID ${i}</td>
        <td>${baseId}-${i}</td>
        <td>${c.name || ""}</td>
        <td>${c.mobile || ""}</td>
        <td>${c.joinedMembers || 0}</td>
        <td>→ Main ID</td>
        <td>→ Main ID</td>
        <td class="sub-note">
          इस Sub ID के नीचे जो भी members add होंगे,<br/>
          उनकी commission में से 15% company share कटकर, बाकी 85% Main ID के Bonus Wallet में automatically जाएगा।
        </td>
      `;
      tbody.appendChild(trSub);
    }

    // 3️⃣ TREE VIEW – base sketch + नीचे joined customers list
    const keyMain  = c.mobile + "|main";
    const keySub1  = c.mobile + "|sub1";
    const keySub2  = c.mobile + "|sub2";
    const keySub3  = c.mobile + "|sub3";

    const mainChildren = childrenIndex[keyMain]  || [];
    const sub1Children = childrenIndex[keySub1]  || [];
    const sub2Children = childrenIndex[keySub2]  || [];
    const sub3Children = childrenIndex[keySub3]  || [];

    function renderChildList(arr) {
      if (!arr.length) {
        return '<div class="tree-links-empty">कोई customer join नहीं है।</div>';
      }
      let html = "<ul>";
      arr.forEach(ch => {
        const childId = getBaseId(ch);
        html += `<li>${childId} – ${ch.name || ""} (${ch.mobile || ""})</li>`;
      });
      html += "</ul>";
      return html;
    }

    let trTree = document.createElement("tr");
    trTree.className = "tree-row";
    trTree.innerHTML = `
      <td colspan="8">
        <div class="tree-card">
          <div class="tree-title">Tree View (सिर्फ Admin के लिए)</div>
          <div class="tree">
            <!-- Level 1: Main -->
            <div class="tree-level-1">
              <div class="tree-node">Main ID<br>${baseId}</div>
            </div>

            <!-- Level 2: Sub1 + Sub2 -->
            <div class="tree-level-2">
              <div class="tree-branch">
                <div class="tree-sub1-wrap">
                  <div class="tree-node small">Sub ID 1<br>${baseId}-1</div>
                  <!-- Level 3: Sub3 नीचे -->
                  <div class="tree-level-3">
                    <div class="tree-node small">Sub ID 3<br>${baseId}-3</div>
                  </div>
                </div>
              </div>
              <div class="tree-branch">
                <div class="tree-node small">Sub ID 2<br>${baseId}-2</div>
              </div>
            </div>
          </div>

          <div class="tree-links">
            <div class="tree-links-title">Main ID के नीचे joint customers:</div>
            ${renderChildList(mainChildren)}

            <div class="tree-links-title">Sub ID 1 के नीचे joint customers:</div>
            ${renderChildList(sub1Children)}

            <div class="tree-links-title">Sub ID 2 के नीचे joint customers:</div>
            ${renderChildList(sub2Children)}

            <div class="tree-links-title">Sub ID 3 के नीचे joint customers:</div>
            ${renderChildList(sub3Children)}
          </div>
        </div>
      </td>
    `;
    tbody.appendChild(trTree);
  });
}

/* -------------------- WITHDRAW LIST -------------------- */
function loadWithdrawals() {
  let list = getWithdrawals();
  let tbody = document.querySelector("#withdrawTable tbody");
  tbody.innerHTML = "";

  list
    .filter(w => w.status === "Pending")
    .forEach(w => {
      let tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${w.name}</td>
        <td>${w.mobile}</td>
        <td>₹${w.amount}</td>
        <td>${w.source === "bonus" ? "Bonus Wallet" : "Commission Wallet"}</td>
        <td>
          <button class="approve-btn" onclick="approveWithdraw(${w.id})">Approve</button>
          <button class="reject-btn" onclick="rejectWithdraw(${w.id})">Reject</button>
        </td>
      `;
      tbody.appendChild(tr);
    });
}

/* -------------------- APPROVE / REJECT -------------------- */
function approveWithdraw(id) {
  let list = getWithdrawals();
  let item = list.find(w => w.id === id);
  if (!item) return;

  item.status = "Paid";
  saveWithdrawals(list);
  loadWithdrawals();
  alert("Withdrawal Approved ✔️");
}

function rejectWithdraw(id) {
  let list = getWithdrawals();
  let item = list.find(w => w.id === id);
  if (!item) return;

  item.status = "Rejected";
  saveWithdrawals(list);
  loadWithdrawals();
  alert("Withdrawal Rejected ❌");
}

/* -------------------- INIT -------------------- */
renderCustomers();
loadWithdrawals();
</script>

</body>
</html>
